<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cards App</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />

<style>
  :root {
    --bg: #0f0f0f;
    --card-bg: #1a1a1a;
    --accent: #ffffff;
    --text: #ffffff;
    --pill-bg: #222;
  }

  body { 
    margin: 0; 
    height: 100vh; 
    background: var(--bg); 
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center; 
    color: var(--text); 
  }

  /* Общий контейнер для кнопок (Таблетка) */
  .pill-menu {
    display: inline-flex;
    background: var(--pill-bg);
    padding: 6px;
    border-radius: 30px;
    gap: 4px;
    margin-bottom: 20px;
  }

  .btn-pill {
    background: transparent;
    color: #888;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .btn-pill:hover { color: #fff; }

  /* Активное состояние (выделение) */
  .btn-pill.active {
    background: var(--accent);
    color: #000;
  }

  .hidden { display: none; }

  /* Слайдер */
  .swiper { width: 320px; height: 440px; margin: 20px 0; }
  .swiper-slide { 
    border-radius: 24px; 
    overflow: hidden; 
    background: var(--card-bg); 
    box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); 
  }
  .swiper-slide img { width: 100%; height: 100%; object-fit: cover; }

  /* Кнопка сохранить (фиксированная ширина, закругленная) */
  .controls {
    display: flex;
    justify-content: center;
    width: 100%;
    margin-top: 10px;
  }

  .save-btn {
    width: 160px; /* Фиксированная ширина */
    height: 50px;
    background: var(--accent);
    color: #000;
    border: none;
    border-radius: 25px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-weight: 700;
    cursor: pointer;
    text-transform: uppercase;
    font-size: 13px;
    letter-spacing: 0.5px;
    transition: transform 0.2s;
  }

  .save-btn:active { transform: scale(0.95); }
  
  .material-symbols-rounded { font-size: 20px; }

  /* Кнопка назад */
  .back-link {
    margin-top: 30px;
    color: #555;
    text-decoration: none;
    font-size: 12px;
    cursor: pointer;
    border: none;
    background: none;
  }
</style>
</head>
<body>

  <div id="lang-step" class="pill-menu">
    <button class="btn-pill" onclick="selectLang('en')">ENGLISH</button>
    <button class="btn-pill" onclick="selectLang('ru')">РУССКИЙ</button>
  </div>

  <div id="type-step" class="pill-menu hidden">
    <div id="type-buttons" style="display: flex; gap: 4px;"></div>
  </div>

  <div id="view-step" class="menu-container hidden" style="text-align: center;">
    <div class="swiper">
      <div class="swiper-wrapper" id="cards"></div>
    </div>

    <div class="controls">
      <button class="save-btn" onclick="downloadCurrent()">
        <span class="material-symbols-rounded">download</span>
        СОХРАНИТЬ
      </button>
    </div>

    <button class="back-link" onclick="location.reload()">НАЧАТЬ ЗАНОВО</button>
  </div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
  const allImages = {"en-arguments":["5","IMG_3376.jpeg"],"en-funny":["5","IMG_3387.jpeg"],"ru-arguments":["6","IMG_3341.jpeg","IMG_3350.jpeg","IMG_3351.jpeg","IMG_3352.jpeg","IMG_3353.jpeg","IMG_3364.jpeg","IMG_3386.jpeg","IMG_3391.jpeg"],"ru-funny":["%","IMG_3387.jpeg"]}; 
  const typesMap = {"funny":"смешные","arguments":"сора"};

  let currentLang = '';
  let currentType = '';
  let swiper;

  function selectLang(lang) {
    currentLang = lang;
    document.getElementById('lang-step').classList.add('hidden');
    const typeStep = document.getElementById('type-step');
    typeStep.classList.remove('hidden');
    
    const btnContainer = document.getElementById('type-buttons');
    btnContainer.innerHTML = '';

    for (const [enName, ruName] of Object.entries(typesMap)) {
      const btn = document.createElement('button');
      btn.className = 'btn-pill';
      btn.innerText = (lang === 'ru' ? ruName : enName).toUpperCase();
      btn.onclick = () => startViewer(enName);
      btnContainer.appendChild(btn);
    }
  }

  function startViewer(type) {
    currentType = type;
    document.getElementById('type-step').classList.add('hidden');
    document.getElementById('view-step').classList.remove('hidden');

    const folderName = `${currentLang}-${currentType}`;
    const images = allImages[folderName] || [];
    const container = document.getElementById('cards');
    container.innerHTML = '';

    images.forEach(img => {
      const slide = document.createElement('div');
      slide.className = 'swiper-slide';
      slide.innerHTML = `<img src="images/${folderName}/${img}">`;
      container.appendChild(slide);
    });

    swiper = new Swiper(".swiper", {
      effect: "cards",
      grabCursor: true,
      cardsEffect: { slideShadows: false }
    });
  }

  function downloadCurrent() {
    const activeIndex = swiper.activeIndex;
    const folderName = `${currentLang}-${currentType}`;
    const images = allImages[folderName];
    if(!images) return;
    
    const imageName = images[activeIndex];
    const link = document.createElement('a');
    link.href = `images/${folderName}/${imageName}`;
    link.download = imageName;
    link.click();
  }
</script>
</body>
</html>
