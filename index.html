<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover">
<title>Карточки</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

<style>
:root {
  --bg:#050505;
  --pill:rgba(20,20,20,.8);
  --accent:#fff;
  --gray:#555;
}

html,body{
  margin:0;height:100%;
  background:var(--bg);color:#fff;
  font-family:-apple-system,sans-serif;
  overflow:hidden;
}

.hidden{display:none!important}
.flex-center{display:flex;align-items:center;justify-content:center;height:100%;flex-direction:column}

/* ===== MODE SWITCH ===== */
.mode-switch{
  position:fixed;
  top:20px;
  z-index:200;
  background:var(--pill);
  border-radius:30px;
  padding:6px;
  display:flex;
  gap:6px;
}
.mode-btn{
  border:none;
  background:none;
  color:#666;
  padding:6px 14px;
  border-radius:20px;
  font-size:11px;
  font-weight:800;
}
.mode-btn.active{
  background:#222;
  color:#fff;
}

/* ===== SWIPER ===== */
.swiper{width:310px;height:440px;transform:translateZ(0)}
.swiper-slide{
  background:#000;
  border-radius:35px;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* FAKE BG (NO BLUR) */
.fake-bg{
  position:absolute;
  inset:0;
  object-fit:cover;
  opacity:.35;
  transform:scale(1.15);
  z-index:1;
}

/* IMAGE */
.main-img{
  z-index:2;
  max-width:100%;
  max-height:100%;
  opacity:0;
  transition:opacity .25s ease-out;
}
.main-img.loaded{opacity:1}
.is-vertical{width:100%;height:100%;object-fit:cover}
.is-horizontal{width:94%;height:auto;border-radius:16px}

/* NAV */
.nav-container{
  position:fixed;
  bottom:30px;
  width:100%;
  display:flex;
  justify-content:center;
  gap:15px;
}
.nav-pill{
  background:var(--pill);
  padding:8px;
  border-radius:40px;
  display:flex;
}
.nav-item{
  background:none;border:none;
  color:var(--gray);
  padding:8px 15px;
  border-radius:30px;
}
.nav-item.active{color:#fff;background:#222}
</style>
</head>

<body>

<!-- MODE SWITCH -->
<div class="mode-switch">
  <button class="mode-btn active" onclick="setMode('cards',this)">CARDS</button>
  <button class="mode-btn" onclick="setMode('vertical',this)">VERTICAL</button>
</div>

<div class="flex-center">
  <div class="swiper" id="sw-main">
    <div class="swiper-wrapper" id="w-main"></div>
  </div>
</div>

<div class="nav-container">
  <div class="nav-pill">
    <button class="nav-item active">Склад</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
const FILES = ["ru_arguments_1767868277325_12.enc","ru_arguments_1767868274034_9.enc","ru_arguments_1767868269647_5.enc","ru_arguments_1767868273062_8.enc","ru_arguments_1767868275164_10.enc","funny_1767871819421_0.enc","ru_arguments_1767868271940_7.enc","ru_arguments_1767868276175_11.enc","ru_arguments_1767868270752_6.enc","ru_arguments_1767868257796_0.enc","ru_arguments_1767868268258_4.enc","ru_arguments_1767868266905_3.enc","ru_arguments_1767868265015_2.enc","ru_arguments_1767868263202_1.enc"];
const PIN = "__PIN__"; // ты подставляешь свой
let swiper, MODE = 'cards';

/* ===== DECRYPT ===== */
async function getSrc(f){
  const r = await fetch(`images/${f}`);
  const enc = await r.text();
  return CryptoJS.AES.decrypt(enc,PIN).toString(CryptoJS.enc.Utf8);
}

/* ===== SLIDE ===== */
function createSlide(src){
  const s=document.createElement('div');
  s.className='swiper-slide';

  const bg=document.createElement('img');
  bg.className='fake-bg';

  const img=document.createElement('img');
  img.className='main-img';
  img.decoding='async';
  img.loading='eager';

  img.onload=()=>{
    const a=img.naturalHeight/img.naturalWidth;
    img.classList.add(a>1.2?'is-vertical':'is-horizontal');
    img.classList.add('loaded');
    bg.src=img.src;
  };

  img.src=src;
  s.append(bg,img);
  return s;
}

/* ===== INIT ===== */
async function init(){
  const w=document.getElementById('w-main');
  w.innerHTML='';
  for(const f of FILES){
    if(!f.endsWith('.enc')) continue;
    const src=await getSrc(f);
    w.appendChild(createSlide(src));
  }
  initSwiper();
}

/* ===== SWIPER MODES ===== */
function initSwiper(){
  if(swiper) swiper.destroy(true,true);

  swiper = new Swiper('#sw-main',{
    direction: MODE === 'vertical' ? 'vertical' : 'horizontal',
    effect: MODE === 'cards' ? 'cards' : 'slide',
    speed: MODE === 'cards' ? 260 : 220,
    resistanceRatio: .85,
    cardsEffect:{
      rotate:false,
      slideShadows:false
    }
  });
}

/* ===== MODE SWITCH ===== */
function setMode(m,btn){
  MODE=m;
  document.querySelectorAll('.mode-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  initSwiper();
}

init();
</script>

</body>
</html>
